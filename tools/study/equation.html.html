<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>简单方程求解 - 生活计算宝典</title>
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="../../layout.css">
    <link rel="stylesheet" href="../../components.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="../../favicon.ico" type="image/x-icon">
</head>
<body class="app">
    <header class="app-header">
        <div class="container">
            <nav class="navbar">
                <div class="navbar-mobile">
                    <a href="../../pages/study.html" class="navbar-back">
                        <i class="fas fa-arrow-left"></i>
                    </a>
                    <div class="navbar-title">简单方程求解</div>
                    <div></div>
                </div>
                
                <div class="navbar-desktop">
                    <a href="../../index.html" class="logo">
                        <i class="fas fa-calculator"></i>
                        <span class="logo-text">生活计算宝典</span>
                    </a>
                    <div class="nav-links">
                        <a href="../../index.html" class="nav-link">首页</a>
                        <a href="../../pages/study.html" class="nav-link active">学习工具</a>
                        <a href="../../pages/tools.html" class="nav-link">所有工具</a>
                    </div>
                    <div class="theme-toggle">
                        <button class="theme-btn" aria-label="切换主题">
                            <i class="fas fa-moon"></i>
                        </button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main class="app-main">
        <section class="section">
            <div class="container">
                <!-- 面包屑导航 -->
                <nav class="breadcrumb">
                    <a href="../../index.html" class="breadcrumb-link">首页</a>
                    <span class="breadcrumb-divider"><i class="fas fa-chevron-right"></i></span>
                    <a href="../../pages/study.html" class="breadcrumb-link">学习工具</a>
                    <span class="breadcrumb-divider"><i class="fas fa-chevron-right"></i></span>
                    <span class="breadcrumb-current">简单方程求解</span>
                </nav>
                
                <!-- 计算器容器 -->
                <div class="calculator-container">
                    <div class="calculator-card">
                        <div class="calculator-header">
                            <h1 class="calculator-title">简单方程求解</h1>
                            <p class="calculator-description">
                                专业的方程求解工具，支持一元一次方程和二元一次方程组的求解。
                            </p>
                        </div>
                        
                        <!-- 方程类型选择 -->
                        <div class="tabs" id="equationTypeTabs">
                            <button class="tab active" data-type="linear">一元一次方程</button>
                            <button class="tab" data-type="system">二元一次方程组</button>
                        </div>
                        
                        <!-- 一元一次方程 -->
                        <div id="linearSection" class="equation-section">
                            <div class="equation-inputs">
                                <div class="equation-display">
                                    <div class="equation-preview" id="linearEquationPreview">
                                        ax + b = 0
                                    </div>
                                </div>
                                
                                <div class="input-group">
                                    <label class="input-label">系数 a (x的系数)</label>
                                    <input type="number" id="coefficientA" class="input-field" placeholder="例如：2" value="2" step="any">
                                </div>
                                
                                <div class="input-group">
                                    <label class="input-label">常数项 b</label>
                                    <input type="number" id="constantB" class="input-field" placeholder="例如：-6" value="-6" step="any">
                                </div>
                                
                                <div class="equation-format">
                                    <label class="input-label">方程形式</label>
                                    <select id="equationForm" class="input-field">
                                        <option value="ax+b=0">ax + b = 0</option>
                                        <option value="ax=b">ax = b</option>
                                        <option value="x+a=b">x + a = b</option>
                                        <option value="ax+b=c">ax + b = c</option>
                                    </select>
                                </div>
                                
                                <div class="equation-examples">
                                    <div class="examples-title">示例方程</div>
                                    <div class="example-buttons">
                                        <button class="example-btn" data-a="2" data-b="-6">2x - 6 = 0</button>
                                        <button class="example-btn" data-a="3" data-b="4" data-c="10">3x + 4 = 10</button>
                                        <button class="example-btn" data-a="0.5" data-b="8">0.5x + 8 = 0</button>
                                        <button class="example-btn" data-a="-1" data-b="5">-x + 5 = 0</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 求解按钮 -->
                            <button class="btn btn-primary btn-block calc-btn" id="solveLinearBtn">
                                <i class="fas fa-calculator"></i> 求解方程
                            </button>
                            
                            <!-- 方程求解结果 -->
                            <div class="equation-result">
                                <h3 class="result-title"><i class="fas fa-check-circle"></i> 方程求解结果</h3>
                                <div class="result-grid">
                                    <div class="result-item">
                                        <span class="result-label">方程</span>
                                        <span class="result-value" id="linearEquation">2x - 6 = 0</span>
                                    </div>
                                    <div class="result-item">
                                        <span class="result-label">解</span>
                                        <span class="result-value" id="linearSolution">x = 3</span>
                                    </div>
                                    <div class="result-item">
                                        <span class="result-label">验证</span>
                                        <span class="result-value" id="linearVerification">2(3) - 6 = 0 ✓</span>
                                    </div>
                                    <div class="result-item">
                                        <span class="result-label">解的类型</span>
                                        <span class="result-value" id="solutionType">唯一解</span>
                                    </div>
                                </div>
                                
                                <!-- 求解步骤 -->
                                <div class="solution-steps mt-4">
                                    <h4 class="steps-title"><i class="fas fa-list-ol"></i> 求解步骤</h4>
                                    <div class="steps" id="linearSteps">
                                        <div class="step">1. 方程: 2x - 6 = 0</div>
                                        <div class="step">2. 移项: 2x = 6</div>
                                        <div class="step">3. 两边同时除以2: x = 3</div>
                                        <div class="step">4. 解: x = 3</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 二元一次方程组 -->
                        <div id="systemSection" class="equation-section" style="display: none;">
                            <div class="equation-inputs">
                                <div class="equation-display">
                                    <div class="equation-preview" id="systemEquationPreview">
                                        a₁x + b₁y = c₁<br>
                                        a₂x + b₂y = c₂
                                    </div>
                                </div>
                                
                                <div class="system-coefficients">
                                    <div class="coefficient-group">
                                        <label class="input-label">第一个方程</label>
                                        <div class="coefficient-row">
                                            <input type="number" id="a1" class="coefficient-input" placeholder="a₁" value="2" step="any">
                                            <span class="coefficient-text">x +</span>
                                            <input type="number" id="b1" class="coefficient-input" placeholder="b₁" value="3" step="any">
                                            <span class="coefficient-text">y =</span>
                                            <input type="number" id="c1" class="coefficient-input" placeholder="c₁" value="8" step="any">
                                        </div>
                                    </div>
                                    
                                    <div class="coefficient-group">
                                        <label class="input-label">第二个方程</label>
                                        <div class="coefficient-row">
                                            <input type="number" id="a2" class="coefficient-input" placeholder="a₂" value="1" step="any">
                                            <span class="coefficient-text">x +</span>
                                            <input type="number" id="b2" class="coefficient-input" placeholder="b₂" value="-1" step="any">
                                            <span class="coefficient-text">y =</span>
                                            <input type="number" id="c2" class="coefficient-input" placeholder="c₂" value="1" step="any">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="equation-examples">
                                    <div class="examples-title">示例方程组</div>
                                    <div class="example-buttons">
                                        <button class="system-example-btn" data-a1="2" data-b1="3" data-c1="8" data-a2="1" data-b2="-1" data-c2="1">例1</button>
                                        <button class="system-example-btn" data-a1="1" data-b1="1" data-c1="5" data-a2="2" data-b2="-1" data-c2="1">例2</button>
                                        <button class="system-example-btn" data-a1="3" data-b1="2" data-c1="7" data-a2="4" data-b2="-3" data-c2="2">例3</button>
                                        <button class="system-example-btn" data-a1="1" data-b1="2" data-c1="10" data-a2="2" data-b2="4" data-c2="20">例4</button>
                                    </div>
                                </div>
                                
                                <div class="solution-method">
                                    <label class="input-label">求解方法</label>
                                    <select id="solutionMethod" class="input-field">
                                        <option value="substitution">代入消元法</option>
                                        <option value="elimination">加减消元法</option>
                                        <option value="cramer">克莱姆法则</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- 求解按钮 -->
                            <button class="btn btn-primary btn-block calc-btn" id="solveSystemBtn">
                                <i class="fas fa-calculator"></i> 求解方程组
                            </button>
                            
                            <!-- 方程组求解结果 -->
                            <div class="equation-result">
                                <h3 class="result-title"><i class="fas fa-check-circle"></i> 方程组求解结果</h3>
                                <div class="result-grid">
                                    <div class="result-item">
                                        <span class="result-label">方程组</span>
                                        <span class="result-value" id="systemEquation">
                                            2x + 3y = 8<br>
                                            x - y = 1
                                        </span>
                                    </div>
                                    <div class="result-item">
                                        <span class="result-label">解</span>
                                        <span class="result-value" id="systemSolution">
                                            x = 2.2<br>
                                            y = 1.2
                                        </span>
                                    </div>
                                    <div class="result-item">
                                        <span class="result-label">验证方程1</span>
                                        <span class="result-value" id="verification1">2(2.2) + 3(1.2) = 8 ✓</span>
                                    </div>
                                    <div class="result-item">
                                        <span class="result-label">验证方程2</span>
                                        <span class="result-value" id="verification2">2.2 - 1.2 = 1 ✓</span>
                                    </div>
                                </div>
                                
                                <!-- 求解步骤 -->
                                <div class="solution-steps mt-4">
                                    <h4 class="steps-title"><i class="fas fa-list-ol"></i> 求解步骤 (代入消元法)</h4>
                                    <div class="steps" id="systemSteps">
                                        <div class="step">1. 方程组: 2x + 3y = 8, x - y = 1</div>
                                        <div class="step">2. 由第二个方程得: x = y + 1</div>
                                        <div class="step">3. 代入第一个方程: 2(y+1) + 3y = 8</div>
                                        <div class="step">4. 化简: 2y + 2 + 3y = 8 → 5y = 6 → y = 1.2</div>
                                        <div class="step">5. 代入求x: x = 1.2 + 1 = 2.2</div>
                                        <div class="step">6. 解: x = 2.2, y = 1.2</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 方程基础知识 -->
                    <div class="equation-basics mt-6">
                        <h3 class="section-title" style="font-size: 1.25rem; text-align: center; margin-bottom: 1rem;">
                            <i class="fas fa-book"></i> 方程基础知识
                        </h3>
                        <div class="basics-grid">
                            <div class="basic-item">
                                <div class="basic-icon" style="background: #3b82f6">
                                    <i class="fas fa-equals"></i>
                                </div>
                                <div class="basic-content">
                                    <h4>一元一次方程</h4>
                                    <p>形式为 ax + b = 0 的方程，其中a和b是常数，a ≠ 0。解为 x = -b/a。表示一条直线与x轴的交点。</p>
                                    <div class="basic-example">例：3x + 6 = 0 → x = -2</div>
                                </div>
                            </div>
                            <div class="basic-item">
                                <div class="basic-icon" style="background: #10b981">
                                    <i class="fas fa-sitemap"></i>
                                </div>
                                <div class="basic-content">
                                    <h4>二元一次方程组</h4>
                                    <p>包含两个未知数x和y的两个方程组成的方程组。解表示两条直线的交点。可能有一个解、无解或无穷多解。</p>
                                    <div class="basic-example">例：2x+y=5, x-y=1 → x=2, y=1</div>
                                </div>
                            </div>
                            <div class="basic-item">
                                <div class="basic-icon" style="background: #8b5cf6">
                                    <i class="fas fa-exchange-alt"></i>
                                </div>
                                <div class="basic-content">
                                    <h4>代入消元法</h4>
                                    <p>从一个方程中解出一个未知数，代入另一个方程中，从而消去一个未知数，化为一元一次方程求解。</p>
                                    <div class="basic-example">例：由x=y+1代入2x+3y=8，得2(y+1)+3y=8</div>
                                </div>
                            </div>
                            <div class="basic-item">
                                <div class="basic-icon" style="background: #f59e0b">
                                    <i class="fas fa-plus-minus"></i>
                                </div>
                                <div class="basic-content">
                                    <h4>加减消元法</h4>
                                    <p>将两个方程相加或相减，消去一个未知数，化为一元一次方程求解。需要适当乘以系数使系数相同或相反。</p>
                                    <div class="basic-example">例：2x+3y=8和x-y=1，第二个方程乘2后相减</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 使用说明 -->
                    <div class="alert alert-info mt-6">
                        <div class="flex items-center">
                            <i class="fas fa-lightbulb mr-3"></i>
                            <div>
                                <strong>方程求解说明：</strong> 
                                <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                                    <li><strong>一元一次方程</strong>：求解形如 ax + b = 0 的方程，显示详细求解步骤</li>
                                    <li><strong>二元一次方程组</strong>：求解两个二元一次方程组成的方程组</li>
                                    <li><strong>求解方法</strong>：支持代入消元法、加减消元法和克莱姆法则</li>
                                    <li><strong>方程验证</strong>：将解代入原方程验证正确性</li>
                                    <li><strong>特殊解</strong>：识别无解和无穷多解的情况</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="app-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-section">
                    <a href="../../index.html" class="footer-logo">
                        <i class="fas fa-calculator"></i>
                        <span>生活计算宝典</span>
                    </a>
                    <p class="footer-description">
                        一站式离线计算工具集合，为您的生活带来便利。
                    </p>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-heading">学习工具</h4>
                    <a href="unit-convert.html" class="footer-link">单位换算器</a>
                    <a href="percentage.html" class="footer-link">百分比计算器</a>
                    <a href="average.html" class="footer-link">平均数计算器</a>
                    <a href="fraction.html" class="footer-link">分数计算器</a>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-heading">快速链接</h4>
                    <a href="../../pages/study.html" class="footer-link">返回学习工具</a>
                    <a href="../../pages/tools.html" class="footer-link">所有工具</a>
                    <a href="https://github.com/laddzhao/life-calculators" target="_blank" class="footer-link">GitHub项目</a>
                    <a href="../../404.html" class="footer-link">404页面</a>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-heading">其他工具</h4>
                    <a href="../health/bmi.html" class="footer-link">BMI计算</a>
                    <a href="../finance/compound.html" class="footer-link">复利计算器</a>
                    <a href="../shopping/discount.html" class="footer-link">折扣计算器</a>
                    <a href="../professional/tax.html" class="footer-link">税费计算</a>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2026 生活计算宝典 · 简单方程求解</p>
            </div>
        </div>
    </footer>

    <!-- 移动端底部导航 -->
    <nav class="mobile-bottom-nav">
        <a href="../../index.html" class="nav-item">
            <i class="fas fa-home nav-icon"></i>
            <span class="nav-label">首页</span>
        </a>
        <a href="../../pages/study.html" class="nav-item active">
            <i class="fas fa-graduation-cap nav-icon"></i>
            <span class="nav-label">学习</span>
        </a>
        <a href="../../pages/tools.html" class="nav-item">
            <i class="fas fa-th nav-icon"></i>
            <span class="nav-label">全部</span>
        </a>
        <a href="#" class="nav-item" id="mobileMenuBtn">
            <i class="fas fa-ellipsis-h nav-icon"></i>
            <span class="nav-label">更多</span>
        </a>
    </nav>

    <script>
        // 当前方程类型
        let currentType = 'linear';
        
        // 一元一次方程求解
        function solveLinearEquation() {
            let a = parseFloat(document.getElementById('coefficientA').value) || 0;
            let b = parseFloat(document.getElementById('constantB').value) || 0;
            const form = document.getElementById('equationForm').value;
            
            // 根据方程形式调整参数
            let equation, solution, verification, steps = [];
            let solutionType = "唯一解";
            
            // 更新方程预览
            updateLinearPreview(a, b, form);
            
            // 检查特殊情况
            if (a === 0) {
                if (b === 0) {
                    solution = "无穷多解 (恒等式)";
                    solutionType = "无穷多解";
                    verification = "0 = 0 ✓";
                    steps = ["方程: 0 = 0", "这是恒等式，所有实数都是解"];
                } else {
                    solution = "无解 (矛盾方程)";
                    solutionType = "无解";
                    verification = "矛盾方程";
                    steps = [`方程: ${b} = 0`, "这是矛盾方程，无解"];
                }
                
                equation = getLinearEquationString(a, b, form);
            } else {
                // 根据方程形式求解
                let x;
                
                switch(form) {
                    case 'ax+b=0':
                        equation = `${a}x ${b >= 0 ? '+' : ''} ${b} = 0`;
                        x = -b / a;
                        steps.push(`方程: ${a}x ${b >= 0 ? '+' : ''} ${b} = 0`);
                        steps.push(`移项: ${a}x = ${-b}`);
                        steps.push(`两边同时除以${a}: x = ${-b}/${a}`);
                        break;
                        
                    case 'ax=b':
                        equation = `${a}x = ${b}`;
                        x = b / a;
                        steps.push(`方程: ${a}x = ${b}`);
                        steps.push(`两边同时除以${a}: x = ${b}/${a}`);
                        break;
                        
                    case 'x+a=b':
                        equation = `x ${b >= 0 ? '+' : ''} ${b} = ${a}`;
                        x = a - b;
                        steps.push(`方程: x ${b >= 0 ? '+' : ''} ${b} = ${a}`);
                        steps.push(`移项: x = ${a} ${b >= 0 ? '-' : '+'} ${Math.abs(b)}`);
                        break;
                        
                    case 'ax+b=c':
                        const c = parseFloat(document.getElementById('constantB').value) || 0;
                        equation = `${a}x ${b >= 0 ? '+' : ''} ${b} = ${c}`;
                        x = (c - b) / a;
                        steps.push(`方程: ${a}x ${b >= 0 ? '+' : ''} ${b} = ${c}`);
                        steps.push(`移项: ${a}x = ${c} - ${b} = ${c - b}`);
                        steps.push(`两边同时除以${a}: x = ${c - b}/${a}`);
                        break;
                }
                
                // 格式化解
                let xFormatted;
                if (Number.isInteger(x)) {
                    xFormatted = x.toString();
                } else {
                    // 检查是否为分数形式
                    const fraction = decimalToFraction(x);
                    if (fraction.denominator <= 10) {
                        xFormatted = `${fraction.numerator}/${fraction.denominator} (≈ ${x.toFixed(4)})`;
                    } else {
                        xFormatted = x.toFixed(4);
                    }
                }
                
                solution = `x = ${xFormatted}`;
                
                // 验证解
                let leftSide;
                switch(form) {
                    case 'ax+b=0':
                        leftSide = a * x + b;
                        verification = `${a}(${x.toFixed(2)}) ${b >= 0 ? '+' : ''} ${b} = ${leftSide.toFixed(2)} ≈ 0 ✓`;
                        break;
                    case 'ax=b':
                        leftSide = a * x;
                        verification = `${a}(${x.toFixed(2)}) = ${leftSide.toFixed(2)} ≈ ${b} ✓`;
                        break;
                    case 'x+a=b':
                        leftSide = x + b;
                        verification = `${x.toFixed(2)} ${b >= 0 ? '+' : ''} ${b} = ${leftSide.toFixed(2)} ≈ ${a} ✓`;
                        break;
                    case 'ax+b=c':
                        leftSide = a * x + b;
                        verification = `${a}(${x.toFixed(2)}) ${b >= 0 ? '+' : ''} ${b} = ${leftSide.toFixed(2)} ≈ ${c} ✓`;
                        break;
                }
                
                steps.push(`解: x = ${xFormatted}`);
            }
            
            // 更新结果显示
            document.getElementById('linearEquation').textContent = equation;
            document.getElementById('linearSolution').textContent = solution;
            document.getElementById('linearVerification').textContent = verification;
            document.getElementById('solutionType').textContent = solutionType;
            
            // 更新求解步骤
            const stepsContainer = document.getElementById('linearSteps');
            stepsContainer.innerHTML = '';
            steps.forEach((step, index) => {
                const stepDiv = document.createElement('div');
                stepDiv.className = 'step';
                stepDiv.textContent = `${index + 1}. ${step}`;
                stepsContainer.appendChild(stepDiv);
            });
        }
        
        // 更新一元一次方程预览
        function updateLinearPreview(a, b, form) {
            let preview;
            
            switch(form) {
                case 'ax+b=0':
                    preview = `${a}x ${b >= 0 ? '+' : ''} ${b} = 0`;
                    break;
                case 'ax=b':
                    preview = `${a}x = ${b}`;
                    break;
                case 'x+a=b':
                    preview = `x ${b >= 0 ? '+' : ''} ${b} = ${a}`;
                    break;
                case 'ax+b=c':
                    const c = parseFloat(document.getElementById('constantB').value) || 0;
                    preview = `${a}x ${b >= 0 ? '+' : ''} ${b} = ${c}`;
                    break;
            }
            
            document.getElementById('linearEquationPreview').textContent = preview;
        }
        
        // 获取一元一次方程字符串
        function getLinearEquationString(a, b, form) {
            switch(form) {
                case 'ax+b=0':
                    return `${a}x ${b >= 0 ? '+' : ''} ${b} = 0`;
                case 'ax=b':
                    return `${a}x = ${b}`;
                case 'x+a=b':
                    return `x ${b >= 0 ? '+' : ''} ${b} = ${a}`;
                case 'ax+b=c':
                    const c = parseFloat(document.getElementById('constantB').value) || 0;
                    return `${a}x ${b >= 0 ? '+' : ''} ${b} = ${c}`;
                default:
                    return `${a}x ${b >= 0 ? '+' : ''} ${b} = 0`;
            }
        }
        
        // 二元一次方程组求解
        function solveSystemOfEquations() {
            const a1 = parseFloat(document.getElementById('a1').value) || 0;
            const b1 = parseFloat(document.getElementById('b1').value) || 0;
            const c1 = parseFloat(document.getElementById('c1').value) || 0;
            const a2 = parseFloat(document.getElementById('a2').value) || 0;
            const b2 = parseFloat(document.getElementById('b2').value) || 0;
            const c2 = parseFloat(document.getElementById('c2').value) || 0;
            const method = document.getElementById('solutionMethod').value;
            
            // 更新方程预览
            document.getElementById('systemEquationPreview').innerHTML = 
                `${formatCoefficient(a1)}x ${formatCoefficient(b1, true)}y = ${c1}<br>` +
                `${formatCoefficient(a2)}x ${formatCoefficient(b2, true)}y = ${c2}`;
            
            // 计算行列式
            const D = a1 * b2 - a2 * b1;  // 系数行列式
            const Dx = c1 * b2 - c2 * b1; // 替换x系数后的行列式
            const Dy = a1 * c2 - a2 * c1; // 替换y系数后的行列式
            
            let solution, equation, verification1, verification2, steps = [];
            let x, y;
            
            // 判断解的情况
            if (D !== 0) {
                // 唯一解
                x = Dx / D;
                y = Dy / D;
                
                // 根据选择的方法显示步骤
                steps = getSolutionSteps(method, a1, b1, c1, a2, b2, c2, x, y);
                
                solution = `x = ${formatNumber(x)}<br>y = ${formatNumber(y)}`;
                equation = `${formatCoefficient(a1)}x ${formatCoefficient(b1, true)}y = ${c1}<br>` +
                          `${formatCoefficient(a2)}x ${formatCoefficient(b2, true)}y = ${c2}`;
                verification1 = `${formatNumber(a1)}(${formatNumber(x)}) ${formatCoefficient(b1, true)}(${formatNumber(y)}) = ${formatNumber(a1*x + b1*y)} ≈ ${c1} ✓`;
                verification2 = `${formatNumber(a2)}(${formatNumber(x)}) ${formatCoefficient(b2, true)}(${formatNumber(y)}) = ${formatNumber(a2*x + b2*y)} ≈ ${c2} ✓`;
            } else {
                if (Dx === 0 && Dy === 0) {
                    // 无穷多解
                    solution = "无穷多解 (两条直线重合)";
                    equation = `${formatCoefficient(a1)}x ${formatCoefficient(b1, true)}y = ${c1}<br>` +
                              `${formatCoefficient(a2)}x ${formatCoefficient(b2, true)}y = ${c2}`;
                    verification1 = "两条直线重合";
                    verification2 = "有无数个交点";
                    steps = ["方程组系数成比例", "两条直线重合", "方程组有无穷多解"];
                } else {
                    // 无解
                    solution = "无解 (两条直线平行)";
                    equation = `${formatCoefficient(a1)}x ${formatCoefficient(b1, true)}y = ${c1}<br>` +
                              `${formatCoefficient(a2)}x ${formatCoefficient(b2, true)}y = ${c2}`;
                    verification1 = "两条直线平行";
                    verification2 = "没有交点";
                    steps = ["方程组系数成比例但常数项不成比例", "两条直线平行", "方程组无解"];
                }
            }
            
            // 更新结果显示
            document.getElementById('systemEquation').innerHTML = equation;
            document.getElementById('systemSolution').innerHTML = solution;
            document.getElementById('verification1').textContent = verification1;
            document.getElementById('verification2').textContent = verification2;
            
            // 更新求解步骤
            const stepsContainer = document.getElementById('systemSteps');
            stepsContainer.innerHTML = '';
            steps.forEach((step, index) => {
                const stepDiv = document.createElement('div');
                stepDiv.className = 'step';
                stepDiv.textContent = `${index + 1}. ${step}`;
                stepsContainer.appendChild(stepDiv);
            });
            
            // 更新步骤标题
            document.querySelector('#systemSection .steps-title').innerHTML = 
                `<i class="fas fa-list-ol"></i> 求解步骤 (${getMethodName(method)})`;
        }
        
        // 获取求解步骤
        function getSolutionSteps(method, a1, b1, c1, a2, b2, c2, x, y) {
            const steps = [];
            
            switch(method) {
                case 'substitution':
                    // 代入消元法
                    steps.push(`方程组: ${formatCoefficient(a1)}x ${formatCoefficient(b1, true)}y = ${c1}, ${formatCoefficient(a2)}x ${formatCoefficient(b2, true)}y = ${c2}`);
                    
                    // 选择系数较简单的方程进行变形
                    if (Math.abs(a2) <= Math.abs(a1)) {
                        steps.push(`由第二个方程解出x: x = ${formatNumber(-b2/a2)}y ${formatCoefficient(c2/a2, true)}`);
                        steps.push(`代入第一个方程: ${a1}(${formatNumber(-b2/a2)}y ${formatCoefficient(c2/a2, true)}) ${formatCoefficient(b1, true)}y = ${c1}`);
                    } else {
                        steps.push(`由第一个方程解出x: x = ${formatNumber(-b1/a1)}y ${formatCoefficient(c1/a1, true)}`);
                        steps.push(`代入第二个方程: ${a2}(${formatNumber(-b1/a1)}y ${formatCoefficient(c1/a1, true)}) ${formatCoefficient(b2, true)}y = ${c2}`);
                    }
                    
                    steps.push(`化简后解得: y = ${formatNumber(y)}`);
                    steps.push(`代入求x: x = ${formatNumber(x)}`);
                    steps.push(`解: x = ${formatNumber(x)}, y = ${formatNumber(y)}`);
                    break;
                    
                case 'elimination':
                    // 加减消元法
                    steps.push(`方程组: ${formatCoefficient(a1)}x ${formatCoefficient(b1, true)}y = ${c1}, ${formatCoefficient(a2)}x ${formatCoefficient(b2, true)}y = ${c2}`);
                    
                    // 消去x
                    const lcmA = lcm(a1, a2);
                    const factor1 = lcmA / a1;
                    const factor2 = lcmA / a2;
                    
                    if (factor1 !== 1 || factor2 !== 1) {
                        steps.push(`第一个方程乘以${factor1}, 第二个方程乘以${factor2}:`);
                        steps.push(`  ${formatCoefficient(a1*factor1)}x ${formatCoefficient(b1*factor1, true)}y = ${c1*factor1}`);
                        steps.push(`  ${formatCoefficient(a2*factor2)}x ${formatCoefficient(b2*factor2, true)}y = ${c2*factor2}`);
                    }
                    
                    steps.push(`相减消去x: ${formatCoefficient(b1*factor1 - b2*factor2, true)}y = ${c1*factor1 - c2*factor2}`);
                    steps.push(`解得: y = ${formatNumber(y)}`);
                    
                    // 代入求x
                    steps.push(`代入第一个方程求x: ${formatCoefficient(a1)}x ${formatCoefficient(b1, true)}(${formatNumber(y)}) = ${c1}`);
                    steps.push(`解得: x = ${formatNumber(x)}`);
                    steps.push(`解: x = ${formatNumber(x)}, y = ${formatNumber(y)}`);
                    break;
                    
                case 'cramer':
                    // 克莱姆法则
                    steps.push(`方程组: ${formatCoefficient(a1)}x ${formatCoefficient(b1, true)}y = ${c1}, ${formatCoefficient(a2)}x ${formatCoefficient(b2, true)}y = ${c2}`);
                    steps.push(`计算行列式: D = a₁b₂ - a₂b₁ = ${a1}×${b2} - ${a2}×${b1} = ${a1*b2 - a2*b1}`);
                    steps.push(`计算Dx: Dx = c₁b₂ - c₂b₁ = ${c1}×${b2} - ${c2}×${b1} = ${c1*b2 - c2*b1}`);
                    steps.push(`计算Dy: Dy = a₁c₂ - a₂c₁ = ${a1}×${c2} - ${a2}×${c1} = ${a1*c2 - a2*c1}`);
                    steps.push(`根据克莱姆法则: x = Dx/D = ${c1*b2 - c2*b1}/${a1*b2 - a2*b1} = ${formatNumber(x)}`);
                    steps.push(`根据克莱姆法则: y = Dy/D = ${a1*c2 - a2*c1}/${a1*b2 - a2*b1} = ${formatNumber(y)}`);
                    steps.push(`解: x = ${formatNumber(x)}, y = ${formatNumber(y)}`);
                    break;
            }
            
            return steps;
        }
        
        // 获取方法名称
        function getMethodName(method) {
            switch(method) {
                case 'substitution': return '代入消元法';
                case 'elimination': return '加减消元法';
                case 'cramer': return '克莱姆法则';
                default: return '代入消元法';
            }
        }
        
        // 格式化系数显示
        function formatCoefficient(coeff, showPlus = false) {
            if (coeff === 0) return '';
            if (coeff === 1) return showPlus ? '+' : '';
            if (coeff === -1) return '-';
            if (coeff > 0 && showPlus) return `+ ${coeff}`;
            return coeff;
        }
        
        // 格式化数字显示
        function formatNumber(num) {
            if (Number.isInteger(num)) return num.toString();
            
            // 检查是否为简单的分数
            const fraction = decimalToFraction(num);
            if (fraction.denominator <= 10 && Math.abs(fraction.numerator) <= 10) {
                return `${fraction.numerator}/${fraction.denominator}`;
            }
            
            return num.toFixed(4);
        }
        
        // 小数转分数函数（从fraction.html复制）
        function decimalToFraction(decimal) {
            const tolerance = 1.0E-6;
            let numerator = 1;
            let denominator = 1;
            let fraction = numerator / denominator;
            
            while (Math.abs(fraction - decimal) > tolerance) {
                if (fraction < decimal) {
                    numerator++;
                } else {
                    denominator++;
                    numerator = Math.round(decimal * denominator);
                }
                fraction = numerator / denominator;
                
                // 防止无限循环
                if (denominator > 10000) break;
            }
            
            // 约分
            const common = gcd(numerator, denominator);
            return {
                numerator: numerator / common,
                denominator: denominator / common
            };
        }
        
        // 最大公约数函数（从fraction.html复制）
        function gcd(a, b) {
            a = Math.abs(a);
            b = Math.abs(b);
            while (b) {
                const temp = b;
                b = a % b;
                a = temp;
            }
            return a;
        }
        
        // 最小公倍数函数（从fraction.html复制）
        function lcm(a, b) {
            return Math.abs(a * b) / gcd(a, b);
        }
        
        // 方程类型切换
        document.querySelectorAll('#equationTypeTabs .tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // 移除所有active类
                document.querySelectorAll('#equationTypeTabs .tab').forEach(t => {
                    t.classList.remove('active');
                });
                
                // 添加active类到当前标签
                this.classList.add('active');
                
                const type = this.dataset.type;
                currentType = type;
                
                // 显示对应的内容区域
                document.querySelectorAll('.equation-section').forEach(section => {
                    section.style.display = 'none';
                });
                document.getElementById(`${type}Section`).style.display = 'block';
                
                // 根据类型重新计算
                if (type === 'linear') {
                    solveLinearEquation();
                } else {
                    solveSystemOfEquations();
                }
            });
        });
        
        // 一元一次方程示例按钮
        document.querySelectorAll('.example-btn').forEach(button => {
            button.addEventListener('click', function() {
                const a = parseFloat(this.dataset.a);
                const b = parseFloat(this.dataset.b);
                const c = parseFloat(this.dataset.c) || 0;
                
                document.getElementById('coefficientA').value = a;
                document.getElementById('constantB').value = b;
                
                // 如果有c值，使用ax+b=c形式
                if (this.dataset.c) {
                    document.getElementById('equationForm').value = 'ax+b=c';
                }
                
                solveLinearEquation();
            });
        });
        
        // 二元一次方程组示例按钮
        document.querySelectorAll('.system-example-btn').forEach(button => {
            button.addEventListener('click', function() {
                document.getElementById('a1').value = parseFloat(this.dataset.a1);
                document.getElementById('b1').value = parseFloat(this.dataset.b1);
                document.getElementById('c1').value = parseFloat(this.dataset.c1);
                document.getElementById('a2').value = parseFloat(this.dataset.a2);
                document.getElementById('b2').value = parseFloat(this.dataset.b2);
                document.getElementById('c2').value = parseFloat(this.dataset.c2);
                
                solveSystemOfEquations();
            });
        });
        
        // 绑定输入事件
        function setupEventListeners() {
            // 一元一次方程输入变化
            document.querySelectorAll('#linearSection input, #linearSection select').forEach(element => {
                element.addEventListener('input', solveLinearEquation);
            });
            
            // 二元一次方程组输入变化
            document.querySelectorAll('#systemSection input, #systemSection select').forEach(element => {
                element.addEventListener('input', solveSystemOfEquations);
            });
            
            // 求解按钮
            document.getElementById('solveLinearBtn').addEventListener('click', solveLinearEquation);
            document.getElementById('solveSystemBtn').addEventListener('click', solveSystemOfEquations);
        }
        
        // 主题切换
        function initTheme() {
            const themeBtn = document.querySelector('.theme-btn');
            
            // 检查本地存储的主题设置
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
            }
            
            // 切换主题函数
            function toggleTheme() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                
                // 更新图标
                if (themeBtn) {
                    const icon = themeBtn.querySelector('i');
                    icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
                }
            }
            
            // 添加事件监听
            if (themeBtn) themeBtn.addEventListener('click', toggleTheme);
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            initTheme();
            setupEventListeners();
            
            // 页面加载时自动计算一次
            solveLinearEquation();
            solveSystemOfEquations();
            
            // 移动端菜单
            const menuBtn = document.getElementById('mobileMenuBtn');
            if (menuBtn) {
                menuBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    alert('移动端菜单功能需要完整的菜单HTML结构');
                });
            }
        });
    </script>
    
    <style>
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border-light);
            margin-bottom: 1.5rem;
            overflow-x: auto;
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            font-weight: 500;
            color: var(--text-secondary);
            text-decoration: none;
            border: none;
            background: none;
            border-bottom: 2px solid transparent;
            white-space: nowrap;
            cursor: pointer;
            transition: all var(--transition);
        }
        
        .tab:hover {
            color: var(--primary);
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .equation-section {
            margin-bottom: 1.5rem;
        }
        
        .equation-inputs {
            margin-bottom: 1.5rem;
        }
        
        .equation-display {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-light);
            text-align: center;
            font-family: 'Courier New', monospace;
        }
        
        .equation-preview {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .system-coefficients {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .coefficient-group {
            display: flex;
            flex-direction: column;
        }
        
        .coefficient-row {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .coefficient-input {
            width: 4rem;
            text-align: center;
            padding: 0.5rem;
            border: 1px solid var(--border-light);
            border-radius: var(--radius);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-weight: 600;
        }
        
        .coefficient-text {
            font-weight: 600;
            color: var(--text-primary);
            white-space: nowrap;
        }
        
        .equation-examples {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            padding: 1rem;
            margin: 1.5rem 0;
            border: 1px solid var(--border-light);
        }
        
        .examples-title {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
        }
        
        .example-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .example-btn,
        .system-example-btn {
            padding: 0.5rem 1rem;
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            border-radius: var(--radius);
            color: var(--text-secondary);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all var(--transition);
        }
        
        .example-btn:hover,
        .system-example-btn:hover {
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary);
        }
        
        .solution-method {
            margin: 1.5rem 0;
        }
        
        .equation-result {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px solid var(--border-light);
        }
        
        .solution-steps {
            margin-top: 1.5rem;
        }
        
        .steps-title {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .steps {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .step {
            padding: 0.5rem;
            background: var(--bg-primary);
            border-radius: var(--radius);
            border-left: 3px solid var(--primary);
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .equation-basics {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            border: 1px solid var(--border-light);
        }
        
        .basics-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        @media (min-width: 768px) {
            .basics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .basics-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        .basic-item {
            display: flex;
            flex-direction: column;
            padding: 1rem;
            background: var(--bg-primary);
            border-radius: var(--radius);
            border: 1px solid var(--border-light);
        }
        
        .basic-icon {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.25rem;
            margin-bottom: 0.75rem;
        }
        
        .basic-content {
            flex: 1;
        }
        
        .basic-content h4 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
        
        .basic-content p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.4;
            margin-bottom: 0.5rem;
        }
        
        .basic-example {
            font-size: 0.75rem;
            color: var(--primary);
            font-family: 'Courier New', monospace;
            padding: 0.5rem;
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
        }
        
        @media (max-width: 640px) {
            .tab {
                padding: 0.5rem 1rem;
                font-size: 0.875rem;
            }
            
            .coefficient-row {
                justify-content: center;
            }
            
            .example-buttons {
                justify-content: center;
            }
            
            .basics-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>
</html>